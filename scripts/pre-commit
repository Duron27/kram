#!/bin/bash

# Check if there are any staged changes
if ! git diff --cached --name-only | grep -q '\.cpp\|\.c\|\.h\|\.hpp'; then
    exit 0
fi

# Run clang-format on staged changes
git clang-format --style=file

# Check if clang-format made any changes
if ! git diff --cached --name-only | grep -q '\.cpp\|\.c\|\.h\|\.hpp'; then
    echo "No changes made by clang-format."
    exit 0
fi

# Add the formatted changes
echo "Code formatted with clang-format."
git add .
